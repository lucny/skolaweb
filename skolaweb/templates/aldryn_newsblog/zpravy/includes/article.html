{% load i18n apphooks_config_tags cms_tags sekizai_tags staticfiles thumbnail %}

<article class="aldryn-newsblog-article{% if article.is_featured %} aldryn-newsblog-featured{% endif %}{% if not article.published %} unpublished{% endif %}{% if article.future %} future{% endif %}">
        <div class="row">
{% if not detail_view %}
    {% if article.featured_image_id %}
        <div class="col-sm-4">
        <p class="visual">
                <a href="{{ article.get_absolute_url }}">
            {% if image == "large" %}
                <img src="{% thumbnail article.featured_image 800x450 crop subject_location=article.featured_image.subject_location %}" alt="{{ article.featured_image.alt }}" class="img-responsive">
            {% else %}
                <img src="{% thumbnail article.featured_image 400x225 crop subject_location=article.featured_image.subject_location %}" alt="{{ article.featured_image.alt }}" class="img-responsive">
            {% endif %}
                </a>
        </p>
        </div>
    {% endif %}
{% endif %}
{% if not detail_view %}
    <div class="col-sm-8">
        <h3><a href="{% namespace_url 'article-detail' article.slug namespace=namespace default='' %}">{% render_model article "title" %}</a></h3>
        <div class="lead article-list">
            {% render_model article "lead_in" "" "" "truncatewords:'50'" %}
            {% if article.categories %}
                <p class="category">
                    {% for category in article.categories.all %}
                        <a href="{% namespace_url 'article-list-by-category' category.slug namespace=namespace default='' %}">{{ category.name }}</a>{% if not forloop.last %}, {% endif %}
                        {% if forloop.last %} | {% endif %}
                    {% endfor %}
                    {{ article.publishing_date|date }}
                    {% if article.author %}{% with author=article.author %} | autor: <a href="{% namespace_url "article-list-by-author" author.slug namespace=namespace default='' %}">{{ author.name }}</a>{% endwith %}{% endif %}
                </p>
            {% endif %}
        </div>
    </div>
{% endif %}
{% if detail_view %}
    <div class="col-sm-12">
    </div>

    {% if detail_view %}
        <div class="col-sm-12 lead">
         <h2>{% render_model article "title" %}</h2>
        {% if article.categories %}
            <p class="category">
                {% for category in article.categories.all %}
                    <a href="{% namespace_url 'article-list-by-category' category.slug namespace=namespace default='' %}">{{ category.name }}</a>{% if not forloop.last %}, {% endif %}
                    {% if forloop.last %} | {% endif %}
                {% endfor %}
                {{ article.publishing_date|date }}
                {% if article.author %}{% with author=article.author %} | autor: <a href="{% namespace_url "article-list-by-author" author.slug namespace=namespace default='' %}">{{ author.name }}</a>{% endwith %}{% endif %}
            </p>
        {% endif %}
            {% render_model article "lead_in" %}
        </div>

    {% endif %}
    <div class="col-sm-12">

    {% if detail_view %}
        <div class="content">
            {% render_placeholder article.content language placeholder_language %}
        </div>
    {% endif %}
        </div>
    <div class="col-sm-12">

{% endif %}

    {% if article.tags and detail_view %}
        <!--<p class="tags">
            {% for tag in article.tags.all %}
                <a href="{% namespace_url 'article-list-by-tag' tag=tag.slug namespace=namespace default='' %}">{{ tag.name }}</a>
            {% endfor %}
        </p>-->
    {% endif %}
    </div>
</article>
{% addtoblock "css" %}
<style>
.aldryn-newsblog-article-search .results-list .unpublished,
.aldryn-newsblog-article.unpublished {
    background: #f9fcee url('{% static 'img/aldryn_newsblog/unpublished.png' %}') repeat;
}

.aldryn-newsblog-article-search .results-list .future,
.aldryn-newsblog-article.future {
    background: #eefcfc url('{% static 'img/aldryn_newsblog/future.png' %}') repeat;
}
</style>
{% endaddtoblock %}
